<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Content Manager</title>

    <!-- MUST set manual init BEFORE loading decap-cms -->
    <script>
      window.CMS_MANUAL_INIT = true;
    </script>

    <!-- Load Decap CMS (pin version or latest) -->
    <script src="https://unpkg.com/decap-cms@3.9.0/dist/decap-cms.js" defer></script>
  </head>
  <body>
    <div id="nc-root"></div>

    <!-- Initialize after script loads -->
    <script>
      (function initDecap() {
        // Wait until the CMS lib is available
        function tryInit() {
          if (window.CMS && typeof window.CMS.init === "function") {
            window.CMS.init({ configPath: "/admin/config.yml", root: "#nc-root" });
          } else if (document.readyState === "complete" || document.readyState === "interactive") {
            // not ready yet - try again shortly
            setTimeout(tryInit, 50);
          } else {
            window.addEventListener("load", tryInit, { once: true });
          }
        }
        tryInit();
      })();
    </script>
  </body>
</html>

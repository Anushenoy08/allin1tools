<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Articles | AllIn1Tools</title>
  <link rel="stylesheet" href="common.css" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      margin: 0;
      padding: 0;
    }
    .navbar { 
        width: 100%; 
        position: sticky; 
        top: 0; 
        z-index: 1000; 
        background-color: #fff;
        padding: 1rem 0;
    }
    .container { 
        max-width: 980px; 
        margin: 0 auto; 
        padding: 2rem; 
        background-color: #fff;
        border-radius: 12px;
    }
    .articles-list { 
        display: flex; 
        flex-direction: column; 
        gap: 1rem; 
        background-color: #fff;
        border-radius: 12px;
    }
    .page-header { 
        text-align: center; 
        margin-bottom: 1rem; 
        background-color: #fff;
        border-radius: 12px;
    }
    .article-card {
      display: flex; gap: 1rem; align-items: flex-start;
      background: #fff; border-radius: 12px; padding: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.06);
      text-decoration: none; color: inherit;
    }
    .article-thumb {
      width: 160px; height: 120px; flex-shrink: 0;
      object-fit: cover; border-radius: 8px; background: #eee;
    }
    .article-body {  
        flex: 1; 
        background-color: #fff;
        border-radius: 12px;
    }
    .article-title { 
        font-weight: 600; 
        font-size: 1.1rem; 
        margin-bottom: 4px; 
        background-color: #fff;
        border-radius: 12px;
    }
    .article-date { 
        font-size: 0.85rem; 
        color: #666; 
        margin-bottom: 6px; 
        background-color: #fff;
        border-radius: 12px;
    }
    .article-excerpt { 
        font-size: 0.95rem; 
        color: #333; 
        margin: 0; 
        background-color: #fff;
        border-radius: 12px;
    }
    @media (max-width: 700px) {
      .article-thumb { 
        width: 120px; 
        height: 88px; 
        background-color: #fff;
        border-radius: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="navbar">
    <img src="images/logo.png" alt="Logo">
    <div class="nav-links">
      <a href="index.html">HOME</a>
      <a href="articles.html">ARTICLES</a>
    </div>
  </div>
  <h1>Articles</h1>
  <div id="articles-list"></div>
  <div id="article-content" style="display:none;"></div>

  <script>
    const contentDir = '/content/articles/';
    async function listArticles() {
      try {
        const res = await fetch('https://api.github.com/repos/<YOUR_GITHUB_USERNAME>/<YOUR_REPO_NAME>/contents/content/articles');
        const data = await res.json();
        const listContainer = document.getElementById('articles-list');
        listContainer.innerHTML = '';
        data.forEach(file => {
          if (file.name.endsWith('.md')) {
            const slug = file.name.replace('.md', '');
            const div = document.createElement('div');
            div.className = 'post-item';
            div.innerHTML = `<div class="post-title" onclick="loadArticle('${slug}')">${slug.replace(/-/g, ' ')}</div>`;
            listContainer.appendChild(div);
          }
        });
      } catch (e) {
        document.getElementById('articles-list').innerHTML = '<p>Could not load articles.</p>';
      }
    }

    async function loadArticle(slug) {
      const list = document.getElementById('articles-list');
      const content = document.getElementById('article-content');
      list.style.display = 'none';
      content.style.display = 'block';
      content.innerHTML = `<div class="back-btn" onclick="goBack()">← Back to Articles</div><p>Loading...</p>`;
      try {
        const res = await fetch(`${contentDir}${slug}.md`);
        const md = await res.text();
        content.innerHTML = `<div class="back-btn" onclick="goBack()">← Back to Articles</div>` + marked.parse(md);
      } catch (err) {
        content.innerHTML = `<p>Could not load article.</p>`;
      }
    }

    function goBack() {
      document.getElementById('articles-list').style.display = 'block';
      document.getElementById('article-content').style.display = 'none';
    }

    listArticles();
  </script>
</body>
</html>

